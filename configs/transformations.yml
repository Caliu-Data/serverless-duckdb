# Bruin transformations configuration
# This file defines which bruin transformation scripts to run for Silver and Gold stages

silver:
  # List of bruin transformations to run for Silver stage
  # These scripts should be in transformations/ directory
  - name: orders_clean
    inputs:
      - alias: bronze_orders
        stage: bronze
        source_path: "sales_azure/orders.parquet"
    quality_checks:
      - contract:orders_clean  # Contract-based quality checks
    splink:
      link_type: "dedupe_only"
      unique_id_column_name: "order_id"
      blocking_rules_to_generate_predictions: []
      comparisons: []
  - name: customers_clean
    inputs:
      - alias: bronze_customers
        stage: bronze
        source_path: "sales_azure/customers.parquet"
    quality_checks:
      - contract:customers_clean  # Contract-based quality checks
    splink:
      link_type: "dedupe_only"
      unique_id_column_name: "customer_id"
      blocking_rules_to_generate_predictions: []
      comparisons: []

gold:
  # List of bruin transformations to run for Gold stage
  # These scripts should be in transformations/ directory
  - name: daily_sales
    inputs:
      - alias: orders_clean
        stage: silver
        source_path: "refined/orders_clean.parquet"
  - name: customer_metrics
    inputs:
      - alias: customers_clean
        stage: silver
        source_path: "refined/customers_clean.parquet"
      - alias: orders_clean
        stage: silver
        source_path: "refined/orders_clean.parquet"

